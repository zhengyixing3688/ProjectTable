(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e0bc017"],{5599:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"rankinglist"},[t.showLoading?e("div",{staticClass:"loading"},[e("img",{attrs:{src:a("4045")}})]):t._e(),e("van-nav-bar",{attrs:{title:"排行榜","left-text":"返回","left-arrow":""}}),e("div",{staticClass:"content"},[e("van-tabs",{on:{click:t.TabsMove},model:{value:t.active,callback:function(i){t.active=i},expression:"active"}},t._l(t.dataArr,(function(i,a){return e("van-tab",{key:a,attrs:{title:i.name}},[e("div",{staticClass:"ranking-content clearfix"},[e("div",{ref:"left",refInFor:!0,staticClass:"left fl",attrs:{value:t.i2}},t._l(i.data,(function(i,a){return e("div",{key:a,class:t.top_index==a?"active":"",on:{click:function(e){return t.topMove(a,i._id)}}},[t._v(t._s(i.shortTitle))])})),0),e("div",{ref:"right",refInFor:!0,staticClass:"right fl",attrs:{value:t.i2}},[e("van-list",{staticClass:"popup-list",attrs:{finished:t.load.finished,"finished-text":t.load.loadingMsg,offset:50},on:{load:t.onLoad},model:{value:t.load.loading,callback:function(i){t.$set(t.load,"loading",i)},expression:"load.loading"}},t._l(t.rigDataArr,(function(i,a){return e("div",{key:a,staticClass:"item clearfix",on:{click:function(a){return t.SkipDetail(i._id)}}},[e("div",{staticClass:"img-box fl"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgKey(i.cover),expression:"imgKey(it.cover)"}],staticClass:"auto-img",attrs:{alt:"图片未加载..."}})]),e("div",{staticClass:"text-box fl"},[e("div",{staticClass:"title"},[t._v(t._s(i.title))]),e("div",{staticClass:"name-box clearfix"},[e("div",{staticClass:"text"},[t._v(t._s(i.shortIntro))])]),e("div",{staticClass:"text-content"},[t._v(t._s(i.majorCate)+" : "+t._s(i.minorCate))])])])})),0)],1)])])})),1)],1)],1)},s=[],o=(a("fb6a"),a("a434"),a("2909")),n={data:function(){return{active:0,dataArr:[],top_index:0,rigDataArr:[],rigDataArrBooks:[],id1:[],id2:[],id3:[],index2:0,i2:0,i3:0,i:0,showLoading:!1,loadCount:10,load:{loading:!0,finished:!1,loadingMsg:"数据加载完毕..."}}},methods:{getData:function(){var t=this;this.showLoading=!0,this.axios.get("http://novel.kele8.cn/rank-category").then((function(i){t.showLoading=!1,t.dataArr.push({data:i.data.male,name:"男生"}),t.dataArr.push({data:i.data.female,name:"女生"}),t.dataArr.push({data:i.data.picture,name:"漫画"}),t.getXq(t.dataArr[0].data[0]._id),t.id1.push(t.dataArr[0].data[0]._id),t.id2.push(t.dataArr[1].data[0]._id),t.id3.push(t.dataArr[2].data[0]._id)})).catch((function(i){t.showLoading=!1,console.log(i,"-------\x3eerr")}))},getXq:function(t){var i=this;this.axios.get("http://novel.kele8.cn/rank/"+t).then((function(t){200==t.status&&(i.rigDataArrBooks=t.data.ranking.books,i.rigDataArr=i.rigDataArrBooks.splice(0,i.loadCount),i.rigDataArrBooks.length>0?i.load.loading=!1:(i.load.loading=!0,i.load.finished=!0))})).catch((function(t){console.log(err,"-------err")}))},topMove:function(t,i){this.top_index=t,this.getXq(i),this.i2==this.index2&&(this.$refs.right[this.i2].scrollTop=0),console.log(this.$refs.right,"right"),console.log(this.i2),console.log(this.index2)},onLoad:function(){var t=this;setTimeout((function(){var i;(i=t.rigDataArr).push.apply(i,Object(o["a"])(t.rigDataArrBooks.splice(0,t.loadCount))),t.load.loading=!1,0==t.rigDataArrBooks.length&&(t.load.loading=!0,t.load.finished=!0)}),1e3)},TabsMove:function(t){this.active=t,this.i2=this.active,this.i3=this.active,this.index2=this.active,0==this.active?this.getXq(this.id1[0]):1==this.active?this.getXq(this.id2[0]):2==this.active&&this.getXq(this.id3[0]),console.log(this.active,"active")},SkipDetail:function(t){this.$router.push({name:"Detail",query:{id:t}})},goUpLeve:function(){this.$router.go(-1)},imgKey:function(t){return unescape(t).slice(7)}},created:function(){this.getData()}},r=n,l=(a("86c5"),a("2877")),c=Object(l["a"])(r,e,s,!1,null,"cf0817d4",null);i["default"]=c.exports},"86c5":function(t,i,a){"use strict";var e=a("fc23"),s=a.n(e);s.a},fc23:function(t,i,a){}}]);
//# sourceMappingURL=chunk-4e0bc017.43e5c93c.js.map